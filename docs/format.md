---
layout: docs
title: Format
permalink: /docs/format/
---

PubAnnotation uses [JSON](http://json.org/) as its default format to contain annotations.
This document describes how annotations are represented in JSON in PubAnnotation.

PubAnnotation JSON annotation format supports three different types of information. accomodates supports three different types of annotation:

* *denotation*,
* *relation*, and
* *modification*.

## Denotation

A denotation annotation in PubAnnotation connects a span of text to a conceptual object.

{% highlight json %}
{
   "text": "IRF-4 expression in CML may be induced by IFN-α therapy",
   "denotations": [
      {"id": "T1", "span": {"begin": 0, "end": 5}, "obj": "Protein"},
      {"id": "T2", "span": {"begin": 42, "end": 47}, "obj": "Protein"}
   ]
}
{% endhighlight %}

![denotation example]({{ site.baseurl }}/img/ex-denotation.png)

The example annotation above states that the text spans, *IRF-4* and *IFN-α*, that takes the positions between 0'th and 5'th characters and 42'nd and 47'th characters, respectively, are connected to the object *Protein*. Note that in visualization, labels are truncated in the end in case of insufficient space.
In the JSON representation, *id* specification is optional, but both *span* and *obj* have to be specified to make a denotation annotation.

Denotation is the most prevalent type of annotation.

The visualization is generated by [TextAE](http://bionlp.dbcls.jp/textae/), a default visualization and editing tool of PubAnnotation.

The semantics behind the JSON format may be described as below:
{% highlight rdf %}
<T1> rdf:type cao:Context_entity;
     cao:denoted_by <S1>;
     rdf:type genia:Protein.
{% endhighlight %}

The formal detail of the RDF description above will not be discussed here.
Below is core ideas behind the design of the JSON format.

* \<T1> and \<S1> are resources that are defined in the annotation.
* \<T1> is of type *Context_entity*.
  * A *Context_entity* is an entity which is conceived a specific context.
  * The definition of *Context_entity* is provided by the *context annotation ontology* which indicated by the prefix *cao*.
* \<S1> is the span of text that begins at 0 and ends at 5.
  * \<S1> needs to be further described for, e.g., the beginning and ending positions, however we skip it here.
* \<T1> is *denoted by* \<S1>.
  * The predicate *denoted_by* is defined in the *context annotation ontology*.
* \<T1> is of type *Protein* of which the formal definition of provided by the *genia shared task ontology*.


## Relation

A relation annotation relates two objects.

{% highlight json %}
{
   "text": "IRF-4 expression in CML may be induced by IFN-α therapy",
   "denotations": [
      {"id": "T1", "span": {"begin": 0, "end": 5}, "obj": "Protein"},
      {"id": "T2", "span": {"begin": 42, "end": 47}, "obj": "Protein"}
   ],
   "relations": [
      {"id": "R1", "subj": "T1", "pred": "interactWith", "obj": "T2"}
   ]
}
{% endhighlight %}

![relation example]({{ site.baseurl }}/img/ex-relation.png)

The example above states that the two objects, *T1* and *T2*, that are introduced by the two denotations,
are related to each other by the predicate, *interactWith*.
Note that the two objects are specified by the two different keys, *subj* and *obj*,
so the relation is directional.
The design is motivated for a better compatibility with [RDF](http://www.w3.org/RDF/).

Note that PubAnnotation does not enforce any specific annotation scheme,
e.g., the labels for *obj* in denotations and those for *pred* in relations,
and it is fully up to the producer of annotation
how to design the scheme of his/her annotation.
For example, while the way of annotation in above example may be familiar to the community which seeks informatin on protein-protein interaction, another community, e.g., BioNLP Shared Task, may be more familiar with a much fine-grained annotation.

{% highlight json %}
{
   "text": "IRF-4 expression in CML may be induced by IFN-α therapy",
   "denotations": [
      {"id": "T1", "span": {"begin": 0, "end": 5}, "obj": "Protein"},
      {"id": "T2", "span": {"begin": 42, "end": 47}, "obj": "Protein"},
      {"id": "E1", "span": {"begin": 6, "end": 16}, "obj": "Expression"},
      {"id": "E2", "span": {"begin": 31, "end": 38}, "obj": "Regulation"}
   ],
   "relations": [
      {"id": "R1", "subj": "T1", "pred": "themeOf", "obj": "E1"},
      {"id": "R2", "subj": "E1", "pred": "themeOf", "obj": "E2"},
      {"id": "R3", "subj": "T2", "pred": "causeOf", "obj": "E2"}
   ]
}
{% endhighlight %}

![relation example 2]({{ site.baseurl }}/img/ex-relation2.png)

## Modification

A modification annotation modifies the meaning of denotations and relations, specifically in terms of negation and speculation.

{% highlight json %}
{
   "text": "IRF-4 expression in CML may be induced by IFN-α therapy",
   "denotations": [
      {"id": "T1", "span": {"begin": 0, "end": 5}, "obj": "Protein"},
      {"id": "T2", "span": {"begin": 42, "end": 47}, "obj": "Protein"}
   ],
   "relations": [
      {"id": "R1", "subj": "T1", "pred": "interactWith", "obj": "T2"}
   ],
   "modifications": [
      {"id": "M1", "pred": "Speculation", "obj": "R1"}
   ]
}
{% endhighlight %}

![modification example]({{ site.baseurl }}/img/ex-modification.png)

In the above example, the modification annotation, *M1*, states that the relation, *R1*, is speculative rather than declarative.
The annotation may be motivated by the word, *may*, in the sentence.
However, again, PubAnnotation does not enforce any specific annotation scheme, and actual annotation may be performed in a completely different way.

{% highlight json %}
{
   "text": "IRF-4 expression in CML may be induced by IFN-α therapy",
   "denotations": [
      {"id": "T1", "span": {"begin": 0, "end": 5}, "obj": "Protein"},
      {"id": "T2", "span": {"begin": 42, "end": 47}, "obj": "Protein"},
      {"id": "E1", "span": {"begin": 6, "end": 16}, "obj": "Expression"},
      {"id": "E2", "span": {"begin": 31, "end": 38}, "obj": "Regulation"}
   ],
   "relations": [
      {"id": "R1", "subj": "T1", "pred": "themeOf", "obj": "E1"},
      {"id": "R2", "subj": "E1", "pred": "themeOf", "obj": "E2"},
      {"id": "R3", "subj": "T2", "pred": "causeOf", "obj": "E2"}
   ],
   "modifications": [
      {"id": "M1", "pred": "Speculation", "obj": "E2"}
   ]
}
{% endhighlight %}

![modification example 2]({{ site.baseurl }}/img/ex-modification2.png)

In the above example, 
the modification annotation, *M1*, speculates the denotation, *E2*,
instead of speculating a relation.
It is actually the style of BioNLP Shared Task annotation, and what the annotation means is to speculate the existence of the object, *Regulation*.

Note that the syntax of modification annotation is experimental and subject to chanage.

What labels to use for *pred* of modification is up to the designer of annotation.
However, currently the visualiztion of [TextAE](http://bionlp.dbcls.jp/textae/) supports only *Speculation* and *Negation*.